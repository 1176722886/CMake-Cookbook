# 3.8 检测Boost库

**NOTE**:*此示例代码可以在 https://github.com/dev-cafe/cmake-cookbook/tree/v1.0/chapter-03/recipe-08 中找到，包含C++的示例。该示例在CMake 3.5版(或更高版本)中是有效的，并且已经在GNU/Linux、macOS和Windows上进行过测试。

Boost库是一组C++通用库。这些库提供了许多功能，这些功能在现代C++项目中不可或缺，但是还不能通过C++标准使用这些功能。例如，Boost为元编程、处理可选参数和文件系统操作等提供了相应的组件。这些库中有许多特性后来被C++11、C++14和C++17标准所采用，但是对于保持与旧编译器兼容性的代码库来说，许多Boost组件仍然是首选。

本示例将向您展示如何检测和链接Boost库的一些组件。

## 具体实施

Boost由许多不同的库组成，这些库可以独立使用。CMake可将这个库集合，表示为组件的集合。`FindBoost.cmake`模块不仅可以搜索库集合的完整安装，还可以搜索集合中的特定组件及其依赖项(如果有的话)。我们将逐步建立相应的`CMakeLists.txt`:

1. 我们首先声明最低CMake版本、项目名称、语言，并强制使用C++11标准:

   ```cmake
   cmake_minimum_required(VERSION 3.5 FATAL_ERROR)
   
   project(recipe-08 LANGUAGES CXX)
   
   set(CMAKE_CXX_STANDARD 11)
   set(CMAKE_CXX_EXTENSIONS OFF)
   set(CMAKE_CXX_STANDARD_REQUIRED ON)
   ```

2. 然后，使用`find_package`搜索Boost。若需要对Boost强制性依赖，需要一个参数。这个例子中，只需要文件系统组件，所以我们将它作为参数传递给`find_package`:

   ```cmake
   find_package(Boost 1.54 REQUIRED COMPONENTS filesystem)
   ```

3. 我们添加可执行目标，编译源文件:

   ```cmake
   add_executable(path-info path-info.cpp)
   ```

4. 最后，将目标链接到Boost库组件。由于依赖项声明为`PUBLIC`，依赖于Boost的目标将自动获取依赖项:

   ```cmake
   target_link_libraries(path-info
     PUBLIC
     	Boost::filesystem
   	)
   ```

   

```shell
$ cmake -D BOOST_ROOT=/custom/boost/
$ cmake -D BOOST_INCLUDEDIR=/custom/boost/include -DBOOST_LIBRARYDIR=/custom/boost/lib
```

(译注：本节后续内容缺失，会想办法在后续补上)